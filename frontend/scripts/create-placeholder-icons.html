<!doctype html>
<html>
  <head>
    <title>Generate PWA Icons</title>
  </head>
  <body>
    <h1>Gerador de Ícones PWA - Lava Car</h1>
    <p>Os ícones serão gerados e baixados automaticamente.</p>
    <div id="status"></div>

    <script>
      const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
      const statusDiv = document.getElementById('status');

      // SVG do ícone
      const svgIcon = `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <defs>
    <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2563eb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
    </linearGradient>
  </defs>
  <rect width="512" height="512" rx="90" fill="url(#grad)"/>
  <g transform="translate(256, 256)">
    <path d="M-100,-40 L-80,-80 L80,-80 L100,-40 L100,40 L80,60 L-80,60 L-100,40 Z"
          fill="white" stroke="none"/>
    <rect x="-70" y="-70" width="60" height="30" rx="5" fill="#2563eb" opacity="0.3"/>
    <rect x="10" y="-70" width="60" height="30" rx="5" fill="#2563eb" opacity="0.3"/>
    <circle cx="-60" cy="60" r="25" fill="#1e293b" stroke="white" stroke-width="3"/>
    <circle cx="60" cy="60" r="25" fill="#1e293b" stroke="white" stroke-width="3"/>
    <circle cx="-60" cy="60" r="12" fill="#64748b"/>
    <circle cx="60" cy="60" r="12" fill="#64748b"/>
    <path d="M-30,-100 Q-30,-110 -25,-115 Q-20,-110 -20,-100 Q-25,-90 -30,-100 Z"
          fill="#60a5fa" opacity="0.8"/>
    <path d="M0,-105 Q0,-117 6,-123 Q12,-117 12,-105 Q6,-93 0,-105 Z"
          fill="#60a5fa" opacity="0.8"/>
    <path d="M35,-100 Q35,-110 40,-115 Q45,-110 45,-100 Q40,-90 35,-100 Z"
          fill="#60a5fa" opacity="0.8"/>
  </g>
  <path d="M100,100 Q150,150 100,200" stroke="rgba(255,255,255,0.2)" stroke-width="40" fill="none"/>
</svg>`;

      function svgToPng(svgString, size) {
        return new Promise((resolve) => {
          const canvas = document.createElement('canvas');
          canvas.width = size;
          canvas.height = size;
          const ctx = canvas.getContext('2d');

          const img = new Image();
          const blob = new Blob([svgString], { type: 'image/svg+xml' });
          const url = URL.createObjectURL(blob);

          img.onload = () => {
            ctx.drawImage(img, 0, 0, size, size);
            URL.revokeObjectURL(url);
            resolve(canvas.toDataURL('image/png'));
          };

          img.src = url;
        });
      }

      async function generateIcons() {
        for (const size of sizes) {
          try {
            const dataUrl = await svgToPng(svgIcon, size);

            // Baixar automaticamente
            const link = document.createElement('a');
            link.download = `icon-${size}x${size}.png`;
            link.href = dataUrl;
            link.click();

            statusDiv.innerHTML += `<p>✓ Gerado: icon-${size}x${size}.png</p>`;

            // Pequeno delay entre downloads
            await new Promise((r) => setTimeout(r, 500));
          } catch (error) {
            statusDiv.innerHTML += `<p>✗ Erro ao gerar ${size}x${size}: ${error.message}</p>`;
          }
        }

        statusDiv.innerHTML += `<br><h3>✓ Todos os ícones foram gerados!</h3>`;
        statusDiv.innerHTML += `<p>Mova os arquivos baixados para: <code>frontend/public/icons/</code></p>`;
      }

      // Gerar automaticamente ao carregar
      window.addEventListener('load', () => {
        setTimeout(generateIcons, 1000);
      });
    </script>
  </body>
</html>
